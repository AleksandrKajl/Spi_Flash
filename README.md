# Spi_Flash
Успешно пройденое тестовое задание на должность ***"Програмист встраиваемых устройств"*** в **НПП "Автономные аэрокосмические систеы-ГеоСервис"**
## Задача
Требуется реализовать драйвер микросхемы **W25Q16JV** (SPI Flash) с использованием С++ и
библиотек ***HAL***, ***CMSIS***. Даташит на микросхему и интерфейс класса прилагается.
Результатом должен быть класс, наследующий приложенный интерфейс и реализующий его
функции. Также, в представленном интерфейсе присутствует одна ошибка, её необходимо
найти и исправить.
Целевой МК - ***STM32F103ZET6*** 

Интерфейс класса SPI_Flash:
```
class SPI_Flash {
public:
// Конструктор
SPI_Flash();
/*!
* @brief Инициализация микросхемы. Метод должен вызываться в потоке, после инициализации SPI.
* @return 0 при успешной инициализации.
*/
virtual int init() = 0;
/*!
* @brief Запись блоков во флеш память.
* @param[in] buff - буфер, из которого забираются данные для записи.
* @param[in] first_block - номер первого блока.
* @param[in] num - количество записываемых блоков.
* @return EOK при успешной записи.
*/
virtual int write (const void *buff, uint32_t first_block, uint16_t num) = 0;
/*!
* @brief Чтение блоков из флеш памяти.
* @param[out] buff - буфер, в который считываются данные.
* @param[in] first_block - номер первого блока.
* @param[in] num - количество считываемых блоков.
* @return EOK при успешной записи.
*/
virtual int read (void *buff, uint32_t first_block, uint16_t num) = 0;
/*!
* @brief Очистка блоков во флеш памяти.
* @param[in] first_block - номер первого блока. Блоки нумеруются от 0 до 32767.
* @param[in] num - количество стираемых блоков.
* @return EOK при успешном выполнении операции.
*/
virtual int erase (uint32_t first_block, uint16_t num) = 0;
/*!
* @brief Возвращает размер блока.
* @return Размер блока в байтах.
*/
virtual uint16_t get_block_size () = 0;
/*!
* @brief Возвращает количество блоков.
* @return Количество блоков
*/
virtual uint16_t get_block_num () = 0;
};
```
## Сборка проекта 
Код инициализации автоматически сгенерирован **CubeMX** для микроконтроллера ***STM32F103ZET6***, для работы над проектом использовалось **IDE CLion**. Работаспособность проекта проверена на **ОС Windows 11x64** 

